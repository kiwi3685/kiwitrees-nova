var find_window_specs="width=550,height=600,left=250,top=150,resizable=1,scrollbars=1";function display_help(e){jQuery(".help-text").each((function(){var t=jQuery(this).attr("id");jQuery("#"+t).load("help_text.php?help="+t+"title="+e)}))}function helpDialog(e,t){var n="help_text.php?help="+e+"&mod="+t;return jQuery('<div style="max-height:375px; overflow-y:auto"><div><div class="loading-image"></div></div></div>').dialog({modal:!0,width:500,height:"auto"}).load(n+" .help_content",(function(){jQuery(this).dialog("option","position",{my:"center top",at:"center top",of:"#content"})})),jQuery(".ui-widget-overlay").on("click",(function(){jQuery("div:ui-dialog:visible").dialog("close")})),jQuery(".ui-dialog-title").load(n+" .helpheader"),!1}function modalDialog(e,t){return jQuery('<div style="max-height:800px; overflow-y:auto"><div title="'+t+'"><div class="loading-image"></div><div></div>').dialog({title:t,modal:!1,width:"auto",height:"auto",modal:!0,closeText:"",close:function(e,t){jQuery(this).remove(),jQuery(".ui-widget-overlay").remove()}}).load(e,(function(){jQuery(this).dialog("option","position",{my:"left top",at:"left+10% top+10%",of:window})})),jQuery(".ui-widget-overlay").on("click",(function(){jQuery("div:ui-dialog:visible").dialog("close"),jQuery(this).remove()})),!1}function modalNotes(e,t){return dialog=jQuery('<div title="'+t+'"></div>').html(e).dialog({modal:!0,width:500,closeText:"",close:function(e,t){jQuery(this).remove()}}),jQuery(".ui-widget-overlay").on("click",(function(){jQuery("div:ui-dialog:visible").dialog("close")})),!1}function modalDialogSubmitAjax(e){return jQuery.ajax({type:"POST",url:jQuery(e).attr("action"),data:jQuery(e).serialize(),success:function(e){window.location.reload()}}),!1}function closePopupAndReloadParent(e){parent.opener&&(e?parent.opener.location=e:parent.opener.location.reload()),window.close()}var msX=0,msY=0;function MM_showHideLayers(){var e,t,n,o=MM_showHideLayers.arguments;for(e=0;e<o.length-3;e+=4)if(null!==(n=document.getElementById(o[e]))&&(n.style&&(div=n,n=n.style),"toggle"==(t=o[e+2])&&(t=-1!=n.visibility.indexOf("hid")?"show":"hide"),t="show"==t?"visible":"hide"==t?"hidden":t,n.visibility=t,"followmouse"==o[e+1])){var i=document.getElementById(o[e+3]);if(null!==i)if("auto"!=i.style.top&&"relatives"!=o[e+3])n.top=5+msY-parseInt(i.style.top)+"px","ltr"==textDirection&&(n.left=5+msX-parseInt(i.style.left)+"px"),"rtl"==textDirection&&(n.right=5+msX-parseInt(i.style.right)+"px");else{n.top="auto";var a=document.documentElement.offsetWidth+document.documentElement.scrollLeft;"rtl"==textDirection&&(a-=document.documentElement.scrollLeft),msX>a-160&&(msX=msX-150-i.offsetLeft);var d=document.getElementById("content");msX-=d.offsetLeft,"ltr"==textDirection&&(n.left=5+msX+"px"),n.zIndex=1e3}else SCRIPT_NAME.indexOf("fanchart")>0?(n.top=msY-20+"px",n.left=msX-20+"px"):-1==SCRIPT_NAME.indexOf("index.php")?(Xadjust=document.getElementById("content").offsetLeft,n.left=msX-Xadjust+5+"px",n.top="auto"):(Xadjust=document.getElementById("content").offsetLeft,n.top=msY-50+"px",n.left=msX-Xadjust+10+"px"),n.zIndex=1e3}}var show=!1;function togglechildrenbox(e){return e=e?"."+e:"",show?(MM_showHideLayers("childbox"+e," ","hide"," "),show=!1):(MM_showHideLayers("childbox"+e," ","show"," "),show=!0),!1}function show_family_box(e,t){if(1,e,"relatives"==t)MM_showHideLayers("I"+e+"links","followmouse","show",""+t);else{if(famlinks=document.getElementById("I"+e+"links"),divbox=document.getElementById("out-"+e),parentbox=document.getElementById("box"+e),famlinks&&divbox&&parentbox)return famlinks.style.top="0px","ltr"==textDirection?famleft=parseInt(divbox.style.width)+15:famleft=0,isNaN(famleft)&&(famleft=0,famlinks.style.top=parentbox.offsetTop+"px"),pagewidth=document.documentElement.offsetWidth+document.documentElement.scrollLeft,"rtl"==textDirection&&(pagewidth-=document.documentElement.scrollLeft),famleft+parseInt(parentbox.style.left)>pagewidth-100&&(famleft=25),famlinks.style.left=famleft+"px",-1!=SCRIPT_NAME.indexOf("index.php")&&(famlinks.style.left="100%"),void MM_showHideLayers("I"+e+"links"," ","show",""+t);MM_showHideLayers("I"+e+"links","followmouse","show",""+t)}}function toggle_family_box(e,t){1==popupopen&&(MM_showHideLayers("I"+lastfamilybox+"links"," ","hide",""+t),popupopen=0),e!=lastfamilybox?(popupopen=1,lastfamilybox=e,"relatives"==t?MM_showHideLayers("I"+e+"links","followmouse","show",""+t):(famlinks=document.getElementById("I"+e+"links"),divbox=document.getElementById("out-"+e),parentbox=document.getElementById("box"+e),parentbox||(parentbox=document.getElementById(t+".0")),famlinks&&divbox&&parentbox?(divWidth=parseInt(divbox.style.width),linkWidth=parseInt(famlinks.style.width),parentWidth=parseInt(parentbox.style.width),famlinks.style.top="3px",famleft=divWidth+8,"rtl"==textDirection&&(famleft-=divWidth+linkWidth+5,"mozilla"!=browserType&&(famleft-=11)),pagewidth=document.documentElement.offsetWidth+document.documentElement.scrollLeft,famleft+parseInt(parentbox.style.left)>pagewidth-100&&(famleft=25),famlinks.style.left=famleft+"px",-1!=SCRIPT_NAME.indexOf("index.php")&&(famlinks.style.left="100%"),MM_showHideLayers("I"+e+"links"," ","show",""+t)):MM_showHideLayers("I"+e+"links","followmouse","show",""+t))):lastfamilybox=""}function hide_family_box(e){MM_showHideLayers("I"+e+"links","","hide",""),popupopen=0,lastfamilybox=""}var timeouts=[];function family_box_timeout(e){timeouts[e]=setTimeout("hide_family_box('"+e+"')",2500)}function clear_family_box_timeout(e){clearTimeout(timeouts[e])}function expand_layer(e){return jQuery("#"+e+"_img").hasClass("fa-minimize")?(jQuery("#"+e).slideDown("slow"),jQuery("#"+e+"_img").removeClass("fa-minimize").addClass("fa-maximize")):(jQuery("#"+e).slideUp("slow"),jQuery("#"+e+"_img").removeClass("fa-maximize").addClass("fa-minimize")),!1}function edit_interface(e,t,n){window.pastefield=n;var o="edit_interface.php?"+jQuery.param(e)+"&accesstime="+accesstime+"&ged="+KT_GEDCOM;return window.open(o,"_blank",""),!1}function edit_record(e,t){return edit_interface({action:"edit",pid:e,linenum:t})}function edit_raw(e){return edit_interface({action:"editraw",pid:e})}function edit_note(e){return edit_interface({action:"editnote",pid:e,linenum:1})}function edit_source(e){return edit_interface({action:"editsource",pid:e,linenum:1})}function add_record(e,t){var n=jQuery("#"+t).val();if(n){if("OBJE"!==n)return edit_interface({action:"add",pid:e,fact:n});window.open("addmedia.php?action=showmediaform&linkid="+encodeURIComponent(xref)+"&ged="+encodeURIComponent(KT_GEDCOM),"_blank",edit_window_specs)}return!1}function addClipboardRecord(e,t){var n=document.getElementById(t);n&&edit_interface({action:"paste",pid:e,fact:n.options[n.selectedIndex].value.substr(10)});return!1}function reorder_media(e){return edit_interface({action:"reorder_media",pid:e},mord_window_specs)}function add_new_record(e,t){return edit_interface({action:"add",pid:e,fact:t})}function addnewchild(e,t){return edit_interface({action:"addchild",gender:t,famid:e})}function addnewspouse(e,t,n){return edit_interface({action:"addspouse",pid:e,famid:t,famtag:n})}function addopfchild(e,t){return edit_interface({action:"addopfchild",pid:e,gender:t})}function addspouse(e,t){return edit_interface({action:"addspouse",pid:e,famtag:t,famid:"new"})}function linkspouse(e,t){return edit_interface({action:"linkspouse",pid:e,famtag:t,famid:"new"})}function add_famc(e){return edit_interface({action:"addfamlink",pid:e,famtag:"CHIL"})}function add_fams(e,t){return edit_interface({action:"addfamlink",pid:e,famtag:t})}function edit_name(e,t){return edit_interface({action:"editname",pid:e,linenum:t})}function add_name(e){return edit_interface({action:"addname",pid:e})}function addnewparent(e,t){return edit_interface({action:"addnewparent",pid:e,famtag:t,famid:"new"})}function addnewparentfamily(e,t,n){return edit_interface({action:"addnewparent",pid:e,famtag:t,famid:n})}function delete_fact(e,t,n,o){if(confirm(o))return edit_interface({action:"delete",pid:e,linenum:t,mediaid:n})}function reorder_children(e){return edit_interface({action:"reorder_children",pid:e})}function reorder_families(e){return edit_interface({action:"reorder_fams",pid:e})}function reply(e,t){return window.open("message.php?to="+e+"&subject="+t+"&ged="+KT_GEDCOM,"_blank",mesg_window_specs),!1}function delete_message(e){return window.open("message.php?action=delete&id="+e,"_blank&ged="+KT_GEDCOM,mesg_window_specs),!1}function change_family_members(e){return edit_interface({action:"changefamily",famid:e})}function addnewsource(e){return edit_interface({action:"addnewsource",pid:"newsour"},null,e)}function addnewrepository(e){return edit_interface({action:"addnewrepository",pid:"newrepo"},null,e)}function addnewnote(e){return edit_interface({action:"addnewnote",noteid:"newnote"},null,e)}function addnewnote_assisted(e,t,n){return edit_interface({action:"addnewnote_assisted",noteid:"newnote",xref:t,census:n},null,e)}function addmedia_links(e,t,n){return pastefield=e,insertRowToTable(t,n),!1}function valid_date(datefield){var months=new Array("JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"),datestr=datefield.value,datearr=datestr.split("("),datephrase="";datearr.length>1&&(datestr=datearr[0],datephrase=datearr[1]),datestr=datestr.toUpperCase(),datestr=datestr.replace(/\s+/," "),datestr=datestr.replace(/(^\s)|(\s$)/,""),datestr=datestr.replace(/(\d)([A-Z])/,"$1 $2"),datestr=datestr.replace(/([A-Z])(\d)/,"$1 $2"),datestr.match(/^Q ([1-4]) (\d\d\d\d)$/)&&(datestr="BET "+months[3*RegExp.$1-3]+" "+RegExp.$2+" AND "+months[3*RegExp.$1-1]+" "+RegExp.$2),datestr.match(/^(@#DHIJRI@|HIJRI)( \d?\d )(\d?\d)( \d?\d?\d?\d)$/)&&(datestr="@#DHIJRI@"+RegExp.$2+hijri_months[parseInt(RegExp.$3,10)-1]+RegExp.$4),datestr.match(/^(@#DJALALI@|JALALI)( \d?\d )(\d?\d)( \d?\d?\d?\d)$/)&&(datestr="@#DJALALI@"+RegExp.$2+jalali_months[parseInt(RegExp.$3,10)-1]+RegExp.$4),datestr.match(/^(@#DHEBREW@|HEBREW)( \d?\d )(\d?\d)( \d?\d?\d?\d)$/)&&(datestr="@#DHEBREW@"+RegExp.$2+hebrew_months[parseInt(RegExp.$3,10)-1]+RegExp.$4),datestr.match(/^(@#DFRENCH R@|FRENCH)( \d?\d )(\d?\d)( \d?\d?\d?\d)$/)&&(datestr="@#DFRENCH R@"+RegExp.$2+french_months[parseInt(RegExp.$3,10)-1]+RegExp.$4);var qsearch=/^([^\d]*)(\d+)[^\d](\d+)[^\d](\d+)$/i;if(qsearch.exec(datestr)){var f0=RegExp.$1,f1=parseInt(RegExp.$2,10),f2=parseInt(RegExp.$3,10),f3=parseInt(RegExp.$4,10),f4=RegExp.$5,dmy="DMY";"undefined"!=typeof locale_date_format&&("MDY"!=locale_date_format&&"YMD"!=locale_date_format||(dmy=locale_date_format));var yyyy=(new Date).getFullYear(),yy=yyyy%100,cc=yyyy-yy;"DMY"==dmy&&f1<=31&&f2<=12||f1>13&&f1<=31&&f2<=12&&f3>31?datestr=f0+f1+" "+months[f2-1]+" "+(f3>=100?f3:f3<=yy?f3+cc:f3+cc-100):"MDY"==dmy&&f1<=12&&f2<=31||f2>13&&f2<=31&&f1<=12&&f3>31?datestr=f0+f2+" "+months[f1-1]+" "+(f3>=100?f3:f3<=yy?f3+cc:f3+cc-100):("YMD"==dmy&&f2<=12&&f3<=31||f3>13&&f3<=31&&f2<=12&&f1>31)&&(datestr=f0+f3+" "+months[f2-1]+" "+(f1>=100?f1:f1<=yy?f1+cc:f1+cc-100))}datestr=datestr.replace(/^[>]([\w ]+)$/,"AFT $1"),datestr=datestr.replace(/^[<]([\w ]+)$/,"BEF $1"),datestr=datestr.replace(/^([\w ]+)[-]$/,"FROM $1"),datestr=datestr.replace(/^[-]([\w ]+)$/,"TO $1"),datestr=datestr.replace(/^[~]([\w ]+)$/,"ABT $1"),datestr=datestr.replace(/^[*]([\w ]+)$/,"EST $1"),datestr=datestr.replace(/^[#]([\w ]+)$/,"CAL $1"),datestr=datestr.replace(/^([\w ]+) ?- ?([\w ]+)$/,"BET $1 AND $2"),datestr=datestr.replace(/^([\w ]+) ?~ ?([\w ]+)$/,"FROM $1 TO $2"),datestr.match(/^=([\d ()\/+*-]+)$/)&&(datestr=eval(RegExp.$1)),datestr=datestr.replace(/(JANUARY)/,"JAN"),datestr=datestr.replace(/(FEBRUARY)/,"FEB"),datestr=datestr.replace(/(MARCH)/,"MAR"),datestr=datestr.replace(/(APRIL)/,"APR"),datestr=datestr.replace(/(MAY)/,"MAY"),datestr=datestr.replace(/(JUNE)/,"JUN"),datestr=datestr.replace(/(JULY)/,"JUL"),datestr=datestr.replace(/(AUGUST)/,"AUG"),datestr=datestr.replace(/(SEPTEMBER)/,"SEP"),datestr=datestr.replace(/(OCTOBER)/,"OCT"),datestr=datestr.replace(/(DECEMBER)/,"DEC"),datestr=datestr.replace(/(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)\.? (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3"),datestr=datestr.replace(/(^| )(\d [A-Z]{3,5} \d{4})/,"$10$2"),datephrase&&(datestr=datestr+" ("+datephrase),datefield.value!==datestr&&(datefield.value=datestr)}var oldheight=0,oldwidth=0,oldz=0,oldleft=0,big=0,oldboxid="",oldimgw=0,oldimgh=0,oldimgw1=0,oldimgh1=0,diff=0,oldfont=0,oldname=0,oldthumbdisp=0,repositioned=0,oldiconsdislpay=0,rv=null;function expandbox(e,t){if(1==big&&(clength>0&&(fontdef.style.display="none"),restorebox(oldboxid,t),e==oldboxid))return!0;jQuery(document).ready((function(){clength=jQuery(".compact_view").length}));var n=window.location.toString();if(divbox=document.getElementById("out-"+e),inbox=document.getElementById("inout-"+e),inbox2=document.getElementById("inout2-"+e),parentbox=document.getElementById("box"+e),parentbox||(parentbox=divbox),gender=document.getElementById("box-"+e+"-gender"),thumb1=document.getElementById("box-"+e+"-thumb"),famlinks=document.getElementById("I"+e+"links"),icons=document.getElementById("icons-"+e),iconz=document.getElementById("iconz-"+e),divbox){if(icons&&(oldiconsdislpay=icons.style.display,icons.style.display="block"),jQuery(iconz).hasClass("icon-zoomin")?jQuery(iconz).removeClass("icon-zoomin").addClass("icon-zoomout"):jQuery(iconz).removeClass("icon-zoomout").addClass("icon-zoomin"),oldboxid=e,big=1,oldheight=divbox.style.height,oldwidth=divbox.style.width,oldz=parentbox.style.zIndex,-1==n.indexOf("descendancy.php")&&(parentbox.style.zIndex="100"),2!=t&&(divbox.style.width="300px",diff=300-parseInt(oldwidth),famlinks&&(famleft=parseInt(famlinks.style.left),famlinks.style.left=famleft+diff+"px")),divleft=parseInt(parentbox.style.left),"rtl"==textDirection&&(divleft=parseInt(parentbox.style.right)),oldleft=divleft,divleft-=diff,repositioned=0,divleft<0&&(repositioned=1,divleft=0),divbox.style.height="auto",inbox){if(inbox.style.display="block",inbox.innerHTML.indexOf("LOADING")>0){var o=e.split(".")[0],i=createXMLHttp();i.open("get","expand_view.php?pid="+o,!0),i.onreadystatechange=function(){4==i.readyState&&(inbox.innerHTML=i.responseText)},i.send(null)}}else inbox.style.display="none";inbox2&&(inbox2.style.display="none"),fontdef=document.getElementById("fontdef-"+e),fontdef&&(oldfont=fontdef.className,fontdef.className="detailsZoom",fontdef.style.display="block"),namedef=document.getElementById("namedef-"+e),namedef&&(oldname=namedef.className,namedef.className="nameZoom"),addnamedef=document.getElementById("addnamedef-"+e),addnamedef&&(oldaddname=addnamedef.className,addnamedef.className="nameZoom"),thumb1&&(oldthumbdisp=thumb1.style.display,thumb1.style.display="block",oldimgw=thumb1.offsetWidth,oldimgh=thumb1.offsetHeight,oldimgw&&(thumb1.style.width=2*oldimgw+"px"),oldimgh&&(thumb1.style.height=2*oldimgh+"px")),gender&&(oldimgw1=gender.offsetWidth,oldimgh1=gender.offsetHeight,oldimgw1&&(gender.style.width="15px"),oldimgh1&&(gender.style.height="15px"))}return!0}function createXMLHttp(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)for(var e=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp","Microsoft.XmlHttp"],t=0;t<e.length;t++)try{return new ActiveXObject(e[t])}catch(e){}throw new Error("XMLHttp object could not be created.")}function restorebox(e,t){return divbox=document.getElementById("out-"+e),inbox=document.getElementById("inout-"+e),inbox2=document.getElementById("inout2-"+e),parentbox=document.getElementById("box"+e),parentbox||(parentbox=divbox),thumb1=document.getElementById("box-"+e+"-thumb"),icons=document.getElementById("icons-"+e),iconz=document.getElementById("iconz-"+e),divbox&&(icons&&(icons.style.display=oldiconsdislpay),jQuery(iconz).hasClass("icon-zoomin")?jQuery(iconz).removeClass("icon-zoomin").addClass("icon-zoomout"):jQuery(iconz).removeClass("icon-zoomout").addClass("icon-zoomin"),big=0,gender&&(oldimgw1+="px",oldimgh1+="px",gender.style.width=oldimgw1,gender.style.height=oldimgh1),thumb1&&(oldimgw+="px",oldimgh+="px",thumb1.style.width=oldimgw,thumb1.style.height=oldimgh,thumb1.style.display=oldthumbdisp),divbox.style.height=oldheight,divbox.style.width=oldwidth,parentbox&&(parentbox.style.zIndex=oldz),inbox&&(inbox.style.display="none"),inbox2&&(inbox2.style.display="block"),fontdef=document.getElementById("fontdef-"+e),fontdef&&(fontdef.className=oldfont),namedef=document.getElementById("namedef-"+e),namedef&&(namedef.className=oldname),addnamedef=document.getElementById("addnamedef-"+e),addnamedef&&(addnamedef.className=oldaddname)),!0}var menutimeouts=[];function show_submenu(e,t,n){var o=document.body.scrollWidth+document.documentElement.scrollLeft,i=document.getElementById(e);if(i&&i.style){document.all?o=document.body.offsetWidth:(o=document.body.scrollWidth+document.documentElement.scrollLeft-55,"rtl"==textDirection&&i.offsetLeft+i.offsetWidth+10);for(var a,d=0,l=i.childNodes.length,r=0;r<l;r++){var s=i.childNodes[r];s.offsetWidth>d+5&&(d=s.offsetWidth)}if(i.offsetWidth<d&&(i.style.width=d+"px"),"down"==n){if((a=document.getElementById(t))&&(i.style.left=a.style.left,i.offsetLeft+i.offsetWidth+10>o)){var c=o-i.offsetWidth;i.style.left=c+"px"}}else if("right"==n&&(a=document.getElementById(t))){if("ltr"==textDirection){var f=a.offsetLeft+a.offsetWidth-40;f+i.offsetWidth+10>o?i.style.right=a.offsetLeft+"px":i.style.left=f+"px"}else i.style.left=a.offsetLeft-i.offsetWidth+"px";i.style.top=a.offsetTop+"px"}i.offsetLeft<0&&(i.style.left="0px"),i.offsetHeight>500&&(i.style.height="400px",i.style.overflow="auto"),i.style.visibility="visible"}clearTimeout(menutimeouts[e]),menutimeouts[e]=null}function hide_submenu(e){if("number"==typeof menutimeouts[e]){var t=document.getElementById(e);t&&t.style&&(t.style.visibility="hidden"),clearTimeout(menutimeouts[e]),menutimeouts[e]=null}}function timeout_submenu(e){"number"!=typeof menutimeouts[e]&&(menutimeouts[e]=setTimeout("hide_submenu('"+e+"')",100))}function statusDisable(e){var t=document.getElementById(e);t.checked=!1,t.disabled=!0}function statusEnable(e){document.getElementById(e).disabled=!1}function statusChecked(e){document.getElementById(e).checked=!0}var monthLabels=[];monthLabels[1]="January",monthLabels[2]="February",monthLabels[3]="March",monthLabels[4]="April",monthLabels[5]="May",monthLabels[6]="June",monthLabels[7]="July",monthLabels[8]="August",monthLabels[9]="September",monthLabels[10]="October",monthLabels[11]="November",monthLabels[12]="December";var monthShort=[];monthShort[1]="JAN",monthShort[2]="FEB",monthShort[3]="MAR",monthShort[4]="APR",monthShort[5]="MAY",monthShort[6]="JUN",monthShort[7]="JUL",monthShort[8]="AUG",monthShort[9]="SEP",monthShort[10]="OCT",monthShort[11]="NOV",monthShort[12]="DEC";var daysOfWeek=[];daysOfWeek[0]="S",daysOfWeek[1]="M",daysOfWeek[2]="T",daysOfWeek[3]="W",daysOfWeek[4]="T",daysOfWeek[5]="F",daysOfWeek[6]="S";var weekStart=0;function cal_setMonthNames(e,t,n,o,i,a,d,l,r,s,c,f){monthLabels[1]=e,monthLabels[2]=t,monthLabels[3]=n,monthLabels[4]=o,monthLabels[5]=i,monthLabels[6]=a,monthLabels[7]=d,monthLabels[8]=l,monthLabels[9]=r,monthLabels[10]=s,monthLabels[11]=c,monthLabels[12]=f}function cal_setDayHeaders(e,t,n,o,i,a,d){daysOfWeek[0]=e,daysOfWeek[1]=t,daysOfWeek[2]=n,daysOfWeek[3]=o,daysOfWeek[4]=i,daysOfWeek[5]=a,daysOfWeek[6]=d}function cal_setWeekStart(e){e>=0&&e<7&&(weekStart=e)}function cal_toggleDate(e,t){var n=document.getElementById(e);if(!n)return!1;if("visible"==n.style.visibility)return n.style.visibility="hidden",!1;if("show"==n.style.visibility)return n.style.visibility="hide",!1;var o=document.getElementById(t);if(!o)return!1;var i;return i=/((\d+ (JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC) )?\d+)/.exec(o.value)?new Date(RegExp.$1):new Date,n.innerHTML=cal_generateSelectorContent(t,e,i),"hidden"==n.style.visibility?(n.style.visibility="visible",!1):"hide"==n.style.visibility&&(n.style.visibility="show",!1)}function cal_generateSelectorContent(e,t,n){var o='<table border="1"><tr>';for(o+='<td><select name="'+e+'_daySelect" id="'+e+'_daySelect" onchange="return cal_updateCalendar(\''+e+"', '"+t+"');\">",i=1;i<32;i++)o+='<option value="'+i+'"',n.getDate()==i&&(o+=' selected="selected"'),o+=">"+i+"</option>";for(o+="</select></td>",o+='<td><select name="'+e+'_monSelect" id="'+e+'_monSelect" onchange="return cal_updateCalendar(\''+e+"', '"+t+"');\">",i=1;i<13;i++)o+='<option value="'+i+'"',n.getMonth()+1==i&&(o+=' selected="selected"'),o+=">"+monthLabels[i]+"</option>";for(o+="</select></td>",o+='<td><input type="text" name="'+e+'_yearInput" id="'+e+'_yearInput" size="5" value="'+n.getFullYear()+'" onchange="return cal_updateCalendar(\''+e+"', '"+t+"');\" /></td></tr>",o+='<tr><td colspan="3">',o+='<table width="100%">',o+="<tr>",j=weekStart,i=0;i<7;i++)o+="<td ",o+='class="descriptionbox"',o+=">",o+=daysOfWeek[j],o+="</td>",j++,j>6&&(j=0);o+="</tr>";var a=new Date(n.getFullYear(),n.getMonth(),1),d=a.getDay();d-=weekStart;var l=864e5;for(a=a.getTime()-d*l+432e5,a=new Date(a),j=0;j<6;j++){for(o+="<tr>",i=0;i<7;i++){o+="<td ",a.getMonth()==n.getMonth()?a.getDate()==n.getDate()?o+='class="descriptionbox"':o+='class="optionbox"':o+='style="background-color:#EAEAEA; border: solid #AAAAAA 1px;"',o+='><a href="#" onclick="return cal_dateClicked(\''+e+"', '"+t+"', "+a.getFullYear()+", "+a.getMonth()+", "+a.getDate()+');">',o+=a.getDate(),o+="</a></td>";var r=a.getTime()+l;a=new Date(r)}o+="</tr>"}return o+="</table>",o+="</td></tr>",o+="</table>"}function cal_setDateField(e,t,n,o){var i=document.getElementById(e);return!!i&&(o<10&&(o="0"+o),i.value=o+" "+monthShort[n+1]+" "+t,!1)}function cal_updateCalendar(e,t){var n=document.getElementById(e+"_daySelect");if(!n)return!1;var o=document.getElementById(e+"_monSelect");if(!o)return!1;var i=document.getElementById(e+"_yearInput");if(!i)return!1;var a=parseInt(o.options[o.selectedIndex].value);a-=1;var d=new Date(i.value,a,n.options[n.selectedIndex].value);d||alert("Date error "+d),cal_setDateField(e,d.getFullYear(),d.getMonth(),d.getDate());var l=document.getElementById(t);return l?(l.innerHTML=cal_generateSelectorContent(e,t,d),!1):(alert("no dateDiv "+t),!1)}function cal_dateClicked(e,t,n,o,i){return cal_setDateField(e,n,o,i),cal_toggleDate(t,e),!1}function findWindow(e,t,n,o){return(o=o||{}).type=t,o.ged=void 0===e?KT_GEDCOM:e,window.pastefield=n,window.open("find.php?"+jQuery.param(o),"_blank",find_window_specs),!1}function findSpecialChar(e){return findWindow(void 0,"specialchar",e)}function findFact(e,t){return findWindow(t,"facts",e,{tags:e.value})}function openerpasteid(e){window.opener.paste_id&&window.opener.paste_id(e),window.close()}function paste_id(e){pastefield.value=e}function pastename(e){nameElement&&(nameElement.innerHTML=e),remElement&&(remElement.style.display="block")}function paste_char(e){document.selection?(pastefield.focus(),sel=document.selection.createRange(),sel.text=e):pastefield.selectionStart||0==pastefield.selectionStart?(pastefield.value=pastefield.value.substring(0,pastefield.selectionStart)+e+pastefield.value.substring(pastefield.selectionEnd,pastefield.value.length),pastefield.selectionStart=pastefield.selectionEnd=pastefield.selectionStart+e.length):pastefield.value+=e,"NPFX"!=pastefield.id&&"GIVN"!=pastefield.id&&"SPFX"!=pastefield.id&&"SURN"!=pastefield.id&&"NSFX"!=pastefield.id||updatewholename()}function message(e,t,n,o){return window.open("message.php?to="+e+"&method="+t+"&url="+n+"&subject="+o,"_blank",mesg_window_specs),!1}function include_css(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),t.appendChild(n)}function include_js(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",e),t.appendChild(n)}function findPosX(e){var t=0;if(e.offsetParent)for(;t+=e.offsetLeft,e.offsetParent;)e=e.offsetParent;else e.x&&(t+=e.x);return t}function findPosY(e){var t=0;if(e.offsetParent)for(;"relative"!=e.style.position&&(t+=e.offsetTop,e.offsetParent);)e=e.offsetParent;else e.y&&(t+=e.y);return t}function notes(e){var t=e.data("obje-note");jQuery(".cboxPhoto").each((function(){jQuery(this).attr("title",t),jQuery(this).tooltip({tooltipClass:"cboxTooltip",position:{my:"center",at:"bottom-60"},hide:{duration:3e3}}).mouseenter()}))}function activate_colorbox(e){jQuery.extend(jQuery.colorbox.settings,{current:"",fixed:!0}),e&&jQuery.extend(jQuery.colorbox.settings,e),jQuery("body").on("click","a.gallery",(function(e){jQuery("a[type^=image].gallery").colorbox({rel:"gallery",photo:!0,fixed:!1,maxWidth:"95%",maxHeight:"95%",minWidth:"320",slideshowSpeed:5e3,slideshow:!0,slideshowAuto:!1,speed:2e3,title:function(){return jQuery(this).data("title")},onComplete:function(){notes(jQuery(this)),jQuery(".cboxPhoto").wheelzoom(),jQuery(".cboxPhoto img").on("click",(function(e){e.preventDefault()}))}}),jQuery("a[type^=application].gallery").colorbox({innerWidth:"60%",innerHeight:"90%",iframe:!0}),jQuery("a[type^=video].gallery").colorbox({innerWidth:"50%",innerHeight:"80%",iframe:!0,rel:"nofollow"})}))}function autocomplete(e){void 0===e&&(e="input[data-autocomplete-type]"),jQuery(e).each((function(){void 0===$(this).data("autocomplete-type")&&alert("Missing data-autocomplete-type attribute"),void 0===jQuery(this).data("autocomplete-ged")&&jQuery(this).data("autocomplete-ged",KT_GEDCOM);var e=jQuery(this);e.autocomplete({source:function(t,n){var o=null;e.data("autocomplete-extra")&&(o=jQuery("#"+e.data("autocomplete-extra")).val()),jQuery.getJSON("autocomplete.php",{field:e.data("autocomplete-type"),ged:e.data("autocomplete-ged"),extra:o,term:t.term},n)},select:function(t,n){var o=jQuery("<p>"+n.item.label+"</p>").text();return jQuery(e).val(o),jQuery(e).nextAll("input[id^=selectedValue]").val(n.item.value),!1},html:!0})}))}function all_caps(){jQuery(".NAME .SURN").css("text-transform","uppercase")}function widget_bar(){jQuery("#widget-button").click((function(){jQuery("#widget-bar").toggle()})),jQuery("#widget-button").click((function(){jQuery("#widget-button").toggleClass("fa-bars fa-xmark")}))}function toggle_select(e){checkboxes=document.getElementsByClassName("check");for(var t=0,n=checkboxes.length;t<n;t++)checkboxes[t].checked=e.checked}function checkbox_delete(e){var t=0,n=0,o=[];for(input_obj=document.getElementsByClassName("check"),t=0;t<input_obj.length;t++)!0===input_obj[t].checked&&(n++,o.push(input_obj[t].value));for(t=0;t<n;t++)switch(e){case"sources":jQuery.post("action.php",{action:"delete-source",xref:o[t]},(function(){location.reload()}));break;case"notes":jQuery.post("action.php",{action:"delete-note",xref:o[t]},(function(){location.reload()}));break;case"repos":jQuery.post("action.php",{action:"delete-repository",xref:o[t]},(function(){location.reload()}));break;case"places":window.location=location.pathname+"?mod=googlemap&mod_action=admin_places&action=DeleteRecord&deleteRecord="+o;break;case"repos":jQuery.post("action.php",{action:"delete-repository",xref:o[t]},(function(){location.reload()}));break;case"dna":jQuery.post("action.php",{action:"delete-dna",dna_id:o[t]},(function(){location.reload()}));break;case"resn":jQuery.post("action.php",{action:"delete-resn",default_resn_id:o[t]},(function(){location.reload()}))}}function persistent_toggle(e,t){var n=document.getElementById(e),o=document.querySelectorAll(t),i=localStorage.getItem(e);if(n){""!==i&&(i="none"),n.checked=""===i;for(var a=0;a<o.length;++a)o[a].style.display=i;n.addEventListener("click",(function(){console.log(i),i=""===i?"none":"",localStorage.setItem(e,i);for(var t=0;t<o.length;++t)o[t].style.display=i}))}}function changeType(e,t){if(e.prop("type")==t)return e;try{return e.prop("type",t)}catch(l){var n=jQuery("<div>").append(e.clone()).html(),o=/type=(\")?([^\"\s]+)(\")?/,a=jQuery(null==n.match(o)?n.replace(">",' type="'+t+'">'):n.replace(o,'type="'+t+'"'));a.data("type",e.data("type"));var d=function(e){return function(){for(i in e){var t=e[i];for(j in t)a.bind(i,t[j].handler)}}}(e.data("events"));return e.replaceWith(a),setTimeout(d,10),a}}function jquery_confirm_defaults(){jconfirm.defaults={bgOpacity:"50%",boxWidth:"100%",useBootstrap:!1,draggable:!1,icon:"fas fa-exclamation-triangle",theme:"kiwitrees",animation:"rotate",animateFromElement:!1,defaultButtons:{ok:{isHidden:!0,isDisabled:!0},close:{isHidden:!0,isDisabled:!0}},autoClose:"close|5000",buttons:{cancel:{text:"Cancel",btnClass:"btnCancel button hollow small",action:function(){}},confirm:{text:"Continue",btnClass:"btnConfirm button primary small",action:function(){url=this.$target.attr("href"),window.open(url,"_blank")}}}}}jQuery(".clearAutocomplete").click((function(){var e=jQuery(this).attr("id");return jQuery("input[id=selectedValue-"+e+"]").val(""),jQuery("input[id=autocompleteInput-"+e+"]").val("").focus(),!1})),jQuery(".parent").each((function(e){var t=jQuery(this).data("group"),n=jQuery(this);n.change((function(){jQuery(t).prop("checked",n.prop("checked"))})),jQuery(t).change((function(){n.prop("checked",!1),jQuery(t+":checked").length==jQuery(t).length&&n.prop("checked",!0)}))})),jQuery(".help_content").on("click",".more",(function(e){e.preventDefault(),jQuery(this).next(".hidden").slideToggle("slow"),jQuery(this).parent().siblings().find(".hidden").slideUp()})),jQuery(".unmask").on("click",(function(){return"password"==jQuery(this).prev("input").attr("type")?(changeType(jQuery(this).prev("input"),"text"),jQuery(".close-eye").attr("data-icon","eye-slash")):(changeType(jQuery(this).prev("input"),"password"),jQuery(".close-eye").attr("data-icon","eye")),!1}));